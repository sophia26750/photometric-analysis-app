<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, Helvetica, sans-serif;
            text-align: center;
        }

        input[type="text"] {
            width: 60%;
            padding: 8px;
            margin: 10px 0;
            font-size: 16px;
        }

        input[type="submit"] {
            padding: 10px 20px;
            font-size: 16px;
            margin-top: 15px;
        }
    </style>
</head>
<body>

    <a href="/" style="color:white; text-decoration:none;">Back to Home</a>
    <br><br>

    <h1>Object Analysis Page</h1>
    <p>You can perform photometry on one object here.</p>

    <hr style="border: 0; border-top: 0.5px solid white;">

    <!-- Single form with two textboxes -->
    <form method="POST" enctype="multipart/form-data">

        <label>Enter Sloan g image path:</label><br>
        <input type="text" name="g_link_both"><br><br>

        <label>Enter Sloan r image path:</label><br>
        <input type="text" name="r_link_both"><br><br>

        <input type="submit" value="Submit">
        
        
    </form>

    <p style="font-size: 20px; text-align: center; margin: 20px 0;">OR</p> 
    <br>
    <p> You can upload your .fits files here! </p>
    <br><br>

    <form method="POST" enctype="multipart/form-data">
        <label>Upload Sloan g FITS:</label>
        <input type="file" name="g_file" accept=".fits">

        <label>Upload Sloan r FITS:</label>
        <input type="file" name="r_file" accept=".fits">

        <button type="submit">Run Calibration</button>
    </form>


    




    <hr style="border: 0; border-top: 0.5px solid white;">

    <p style="font-size: 15px; color: white; margin: 10px 0;">
        <span style="font-weight: bold;">Progress of photometry:</span><br>
    </p>
    

    <div id="status-line" style="font-family: monospace; white-space: pre;"></div>

    <script>
    function pollStatus() {
        fetch("/status")
            .then(response => response.text())
            .then(text => {
                document.getElementById("status-line").textContent = text;
            });
    }

    // Update every 1 second
    setInterval(pollStatus, 700);
    </script>

    {% if g_text and r_text %}
        <div style="margin-top:20px;">
            <h3>You entered:</h3>
            Sloan g: {{ g_text }}<br>
            Sloan r: {{ r_text }}
        </div>
    {% endif %}

    {% if green_flux is not none and red_flux is not none %}
        <div style="margin-top:20px;">
            <h3>Photometric Analysis Results</h3>
            Green Flux: {{ green_flux }}<br>
            Red Flux: {{ red_flux }}<br>
            RA List: {{ ra_list }}<br>
            Dec List: {{ dec_list }}<br>
            g Magnitude: {{ g }}<br>
            r Magnitude: {{ r }}<br>
        </div>
    {% endif %}




</body>
</html>
